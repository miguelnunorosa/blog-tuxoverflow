I"÷<p>Na diversidade que existe no mundo GNU/Linux, existem dois boot managers que nos lembramos logo: LILO e o GRUB. O <em>LILO</em> (<strong>LI</strong>nux <strong>LO</strong>ader) √© um dos mais antigos (ou pelo menos na compara√ß√£o entre estes dois) e vem por padr√£o em muitas distribui√ß√µes. Com a evolu√ß√£o da tecnologia ainda foi desenvolvido uma vers√£o do LILO para sistemas UEFI, contudo, o projeto LILO foi descontinuado em 2015. Contudo, o ELILO ainda √© bastante usado e poder-se-√° encontrar em algumas distribui√ß√µes, como √© o caso do Slackware.</p>

<p>No outro lado, temos o GRUB (que significa <strong>GR</strong>and <strong>U</strong>nified <strong>B</strong>ootloader) que √© um projeto sobe a al√ßada <em>GNU PROJECT</em>. Tal como o anterior, permite multiboot (iniciar v√°rios sistemas operativos que estejam instalados no sistema) e √© o mais utilizado nos dias de hoje. Sim, tamb√©m permite a inicializa√ß√£o de sistemas UEFI e, uma das principais vantagens em rela√ß√£o ao anterior, o GRUB permite utilizar uma palavra passe para continuar o boot, ou seja, tem um factor de seguran√ßa adicional que o LILO n√£o tem (ou pelo menos, e at√© √† data da escrita deste artigo, eu desconhe√ßo - Irei pesquisar e se estiver errado, fa√ßo a corre√ß√£o).</p>

<p>Partindo da frase ‚Äúo Slackware √© antigo‚Äù venho desmistificar esse mito ao mostrar que podemos ter no nosso sistema, tanto o ELILO (caso seja utilizado UEFI) como o GRUB, para isso basta seguir os passos abaixo. De salientar que os comandos aqui mostrados foram testados em v√°rias m√°quinas com diferentes tipo de instala√ß√£o e uso, no entanto recomendo, caso seja do seu interesse, a leitura √† posterori das a√ß√µes de cada comando.</p>

<p><br /></p>

<h2 id="instala√ß√£o">Instala√ß√£o</h2>

<p>A instala√ß√£o do GRUB no Slackware (neste teste irei utilizar a vers√£o <em>current</em>) √© bastante simples e pode ser feita em dois momentos distintos. Vamos ent√£o ver:</p>

<h3 id="1-instala√ß√£o-nova-do-sistema">1) Instala√ß√£o nova do sistema</h3>

<p>Caso pretenda instalar o GRUB em vez do ELILO, fa√ßa o seguinte: Durante a instala√ß√£o, quando surgir a caixa de di√°logo se pretende instalar o <em>LILO</em> selecione <em>skip</em></p>

<p><img src="../assets/img/posts/2022-01-02-grub-no-slackware/newinstall-01.png" alt="Screen01" /></p>

<p>Aqui, novamente selecionar <em>skip</em> para o sistema n√£o instalar o ELILO.</p>

<p><img src="../assets/img/posts/2022-01-02-grub-no-slackware/newinstall-02.png" alt="Screen02" /></p>

<p>Depois √© prosseguir com a instala√ß√£o at√© ao final (at√© aparecer este screen)</p>

<p><img src="../assets/img/posts/2022-01-02-grub-no-slackware/newinstall-03.png" alt="Screen03" /></p>

<p>aqui selecione a op√ß√£o <em>Exit</em>, fa√ßa OK e, <strong>muito importante</strong> (√© aqui o chamado <em>‚Äúpulo do gato‚Äù</em>) seleccione a primeira op√ß√£o, <em>‚ÄúShell‚Äù</em>.</p>

<p><img src="../assets/img/posts/2022-01-02-grub-no-slackware/newinstall-04.png" alt="Screen04" /></p>

<p>Agora sim, vamos instalar o GRUB no sistema. O primeiro passo √© montar a parti√ß√£o <em>/mnt</em> como chroot:</p>

<p><img src="../assets/img/posts/2022-01-02-grub-no-slackware/newinstall-05.png" alt="Screen05" /></p>

<p>Se n√£o houver erro nenhum, este primeiro passo est√° dado. Agora iremos instalar o GRUB na parti√ß√£o de boot do sistema (geralmente (numa instala√ß√£o padr√£o) √© no <em>sda</em>, se n√£o for o seu caso, reveja a sua tabela de parti√ß√µes com o comando <em><strong>df</strong></em> ). <em><strong>ATEN√á√ÉO</strong> se se enganar neste passo compromete todo o seu sistema e acabar√° por reformatar o mesmo, n√£o ser√° grande problema visto ser uma instala√ß√£o de ra√≠z, no entanto, na pr√≥xima forma de instalar pode ser complicado</em>.</p>

<p>O Comando para instalar √©:</p>

<blockquote>
  <p>grub-install /dev/sda</p>
</blockquote>

<p><img src="../assets/img/posts/2022-01-02-grub-no-slackware/newinstall-06.png" alt="Screen06" /></p>

<p>Estamos j√° bem perto do final, basta apenas um comando! O pr√≥ximo passo √© gerar um ficheiro de configura√ß√£o (geralmente com a extens√£o <em>.cfg</em>) para que o bootload possa ‚Äúler‚Äù e entender o que tem que fazer. Executemos o comando:</p>

<blockquote>
  <p>grub-mkconfig -o /boot/grub/grub.cfg</p>
</blockquote>

<p><img src="../assets/img/posts/2022-01-02-grub-no-slackware/newinstall-07.png" alt="Screen07" /></p>

<p>Neste comando, ao chamar o execut√°vel <em>grub-mkconfig</em> utilizamos o parametro <em>-o</em> (que significa <em>output</em>) para definir onde queremos guardar o ficheiro de configura√ß√£o (neste caso fica na diretoria <em>/boot/grub</em>). Quando √© executado, o sistema procura pelos Kernel existentes na m√°quina e adiciona-os de modo a ser op√ß√µes de escolha quando o sistema iniciar. Ap√≥s esta verifica√ß√£o, √© gerado o ficheiro e armazenado na diretoria.</p>

<p>Feito isto fazemos <em>exit</em> para sair do chroot e por fim, <em>reboot</em> para reiniciar a m√°quina. Feito!</p>

<p><img src="../assets/img/posts/2022-01-02-grub-no-slackware/newinstall-08.png" alt="Screen08" /></p>

<p><br /></p>

<h3 id="2-ap√≥s-instala√ß√£o-do-sistema">2) Ap√≥s instala√ß√£o do sistema</h3>

<p>Substituir o ELILO (ou LILO caso seja um sistema sem UEFI) √© relativamente simples. Para come√ßar, quando o sistema terminar o boot e estiver pronto para fazer login com o seu utilizador, troque a interface gr√°fica pelo modo de texto atrav√©s da combina√ß√£o <strong>CTRL+ALT+F2</strong>. Quando pedir o login, fa√ßo-o como root</p>

<p><img src="../assets/img/posts/2022-01-02-grub-no-slackware/postinstall-01.png" alt="Screen09" /></p>

<p>Ap√≥s login, repetimos esta sequ√™ncia de comandos que foram tamb√©m utilizados pelo m√©todo anterior (<em>novamente deixar a mesma nota que √© necess√°rio (re)ver qual parti√ß√£o est√° o boot para n√£o comprometer o sistema</em>):</p>

<blockquote>
  <p>grub-install /dev/sda</p>

  <p>grub-mkconfig -o /boot/grub/grub.cfg</p>
</blockquote>

<p><img src="../assets/img/posts/2022-01-02-grub-no-slackware/postinstall-02.png" alt="Screen10" /></p>

<p>Grub instalado com sucesso! Mas ainda n√£o est√° tudo! Para evitar problemas, vamos remover o (E)LILO que foi instalado durante a instala√ß√£o do sistema. Para isso basta executar:</p>

<blockquote>
  <p>slackpkg remove lilo elilo</p>
</blockquote>

<p><img src="../assets/img/posts/2022-01-02-grub-no-slackware/postinstall-03.png" alt="Screen11" /></p>

<p>Confirmamos a nossa escolha e aguardamos que termine. O √∫ltimo passo √© reiniciar e‚Ä¶ Feito! O GRUB est√° instalado e pronto a ser utilizado.</p>

<p><img src="../assets/img/posts/2022-01-02-grub-no-slackware/grub-final.png" alt="Screen12" /></p>

<p><br /><br /></p>

<h2 id="atualiza√ß√µes">Atualiza√ß√µes</h2>

<p>Ap√≥s cada atualiza√ß√£o do kernel, √© necess√°rio gerar um novo ficheiro de configura√ß√£o do Grub, caso contr√°rio o sistema n√£o ir√° iniciar corretamente, fazendo com que tenha que realizar passos adicionais para voltar a ter o sistema a funcionarem pleno. Assim, por cada update, basta fazer o seguinte comando:</p>

<blockquote>
  <p>grub-mkconfig -o /boot/grub/grub.cfg</p>
</blockquote>

<p><img src="../assets/img/posts/2022-01-02-grub-no-slackware/grub-updates.png" alt="Screen13" /></p>

<p>Se surgir a mensagem que pretende substituir o ficheiro existente, basta dizer que <em>sim</em> e o sistema trata do resto.</p>

<p><br /></p>

<h2 id="v√≠deo">V√≠deo</h2>

<p>Como diz o ditado ‚Äú<em>uma imagem vale mais que mil palavras</em>‚Äù, abaixo deixo o v√≠deo deste post que coloquei no canal do youtube.</p>
<video>
</video>
:ET